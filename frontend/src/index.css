@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply m-0 min-w-[320px] min-h-screen;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  #root {
    @apply w-full h-screen;
  }
}

@layer utilities {
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .shadow-neumorph-inset {
    box-shadow: inset 4px 4px 8px #b8b9be, inset -4px -4px 8px #ffffff;
    background: #ebecf0;
  }

  /* Réduire l'espacement entre les lignes pour whitespace-pre-line */
  .whitespace-pre-line {
    line-height: 1.5 !important;
    white-space: pre-line;
  }

  /* Scrollbars customs (verticales & horizontales) */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(15, 23, 42, 0.3) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--neumorphic-bg-track, #ebecf0);
    border-radius: 9999px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(15, 23, 42, 0.45);
    border-radius: 9999px;
    border: 2px solid var(--neumorphic-bg-track, #ebecf0);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(15, 23, 42, 0.7);
  }

  .dark .custom-scrollbar {
    scrollbar-color: rgba(148, 163, 184, 0.8) transparent;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--neumorphic-bg-track, #4b5563);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(148, 163, 184, 0.9);
    border-color: var(--neumorphic-bg-track, #4b5563);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(209, 213, 219, 1);
  }

  /* Styles pour les tablatures */
  .tablature-content {
    color: rgba(0, 0, 0, 0.85);
  }

  .dark .tablature-content {
    color: rgba(255, 255, 255, 0.9);
  }

  /* Améliorer la lisibilité des SVG dans les tablatures */
  .tablature-content svg {
    max-width: 100%;
    height: auto;
  }

  /* Améliorer le contraste des textes dans les tablatures */
  .tablature-content text {
    fill: rgba(0, 0, 0, 0.85);
  }

  .dark .tablature-content text {
    fill: rgba(255, 255, 255, 0.9);
  }

  /* Améliorer la visibilité des lignes dans les tablatures */
  .tablature-content line {
    stroke: rgba(0, 0, 0, 0.4);
  }

  .dark .tablature-content line {
    stroke: rgba(255, 255, 255, 0.5);
  }

  /* Améliorer la visibilité des cercles/notes dans les tablatures */
  .tablature-content circle {
    stroke-width: 1.5;
  }

  /* Styles pour les conteneurs de tablature HTML */
  .tablature-container {
    font-family: 'Courier New', monospace;
    background: white;
    color: rgba(0, 0, 0, 0.85);
    border-radius: 12px;
    padding: 1.5rem;
  }

  .dark .tablature-container {
    background: #374151;
    color: rgba(255, 255, 255, 0.9);
  }

  .tablature-header {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .dark .tablature-header {
    border-bottom-color: rgba(255, 255, 255, 0.1);
  }

  .tablature-title {
    font-size: 1.25rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
    color: #f97316;
  }

  .tablature-meta {
    display: flex;
    gap: 1.5rem;
    font-size: 0.875rem;
    color: rgba(0, 0, 0, 0.7);
  }

  .dark .tablature-meta {
    color: rgba(255, 255, 255, 0.7);
  }

  .tablature-section {
    margin-bottom: 2rem;
  }

  .section-header {
    margin-bottom: 1rem;
    padding: 0.5rem 1rem;
    background: rgba(6, 182, 212, 0.2);
    border: 1px solid rgba(6, 182, 212, 0.3);
    border-radius: 6px;
    display: inline-block;
  }

  .section-header-text {
    font-size: 0.75rem;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #22d3ee;
  }

  .measure-block {
    margin-bottom: 1.5rem;
    display: flex;
    gap: 1rem;
    align-items: flex-start;
  }

  .measure-meta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    min-width: 3rem;
  }

  .measure-number {
    width: 2rem;
    height: 2rem;
    border-radius: 8px;
    background: white;
    border: 2px solid rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.875rem;
    font-family: monospace;
    color: rgba(0, 0, 0, 0.85);
    transition: all 0.2s ease;
  }

  .dark .measure-number {
    background: #374151;
    border-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.9);
  }

  .measure-number:hover {
    transform: scale(1.1);
  }

  .chord-label {
    font-size: 0.75rem;
    font-weight: bold;
    color: rgba(0, 0, 0, 0.6);
  }

  .dark .chord-label {
    color: rgba(255, 255, 255, 0.6);
  }

  .tablature-lines {
    flex: 1;
    background: white;
    padding: 1.25rem;
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 0.875rem;
    line-height: 1.8;
  }

  .dark .tablature-lines {
    background: #374151;
    border-color: rgba(255, 255, 255, 0.1);
  }

  .tab-line {
    color: rgba(0, 0, 0, 0.9);
    font-family: 'Courier New', monospace;
    letter-spacing: 0.05em;
  }

  .dark .tab-line {
    color: rgba(255, 255, 255, 0.9);
  }

  .tab-fret {
    color: #f97316;
    font-weight: bold;
  }

  .tab-technique {
    color: #22d3ee;
    font-style: italic;
  }

  .tab-structure {
    color: rgba(0, 0, 0, 0.8);
    font-weight: bold;
  }

  .dark .tab-structure {
    color: rgba(255, 255, 255, 0.8);
  }

  .tab-dash {
    color: rgba(0, 0, 0, 0.3);
  }

  /* Les tirets utilisent text-neutral-700 opacity-50 en dark mode */
  .dark .tab-dash {
    color: #374151;
    opacity: 0.5;
  }

  /* Légende des techniques */
  .tablature-legend {
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 0.625rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(0, 0, 0, 0.6);
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
  }

  .dark .tablature-legend {
    border-top-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.6);
  }
}

@keyframes cableConnect {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px) scale(0.8);
  }
  50% {
    opacity: 0.5;
    transform: translateX(-50%) translateY(5px) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

.cable-path {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: cableDraw 0.8s ease-out forwards;
}

@keyframes cableDraw {
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

@keyframes logoAnimation {
  0%, 100% {
    transform: rotate(0deg) scale(1);
    opacity: 1;
  }
  25% {
    transform: rotate(-10deg) scale(1.1);
    opacity: 0.9;
  }
  50% {
    transform: rotate(0deg) scale(1.15);
    opacity: 1;
  }
  75% {
    transform: rotate(10deg) scale(1.1);
    opacity: 0.9;
  }
}
